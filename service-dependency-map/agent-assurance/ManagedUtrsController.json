{
    "microservice": "agent-assurance",
    "controller": "ManagedUtrsController",
    "apis": [
        {
            "endpoint": "GET /managed-utrs/collection/:collection",
            "description": "Lists UTRs for a given collection with pagination.",
            "interactions": [
                {
                    "step": 1,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-assurance-mongo",
                    "operation": "Read",
                    "description": "Find UTRs in the specified collection."
                },
                {
                    "step": 2,
                    "type": "API Call",
                    "service": "des",
                    "method": "GET",
                    "path": "/registration/business-details/utr/:utr",
                    "database": null,
                    "operation": null,
                    "description": "Get business names for the retrieved UTRs."
                }
            ]
        },
        {
            "endpoint": "POST /managed-utrs/collection/:collection",
            "description": "Adds or updates a UTR in a specified collection.",
            "interactions": [
                {
                    "step": 1,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-assurance-mongo",
                    "operation": "Create/Update",
                    "description": "Upsert the UTR property into the specified collection."
                }
            ]
        },
        {
            "endpoint": "GET /managed-utrs/utr/:utr",
            "description": "Gets details for a specific UTR, including assurance status and optionally the business name.",
            "interactions": [
                {
                    "step": 1,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-assurance-mongo",
                    "operation": "Read",
                    "description": "Check if UTR exists in the 'manually-assured' collection."
                },
                {
                    "step": 2,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-assurance-mongo",
                    "operation": "Read",
                    "description": "Check if UTR exists in the 'refusal-to-deal-with' collection."
                },
                {
                    "step": 3,
                    "type": "API Call",
                    "service": "des",
                    "method": "GET",
                    "path": "/registration/business-details/utr/:utr",
                    "database": null,
                    "operation": null,
                    "description": "Get business name for the UTR if requested."
                }
            ]
        },
        {
            "endpoint": "DELETE /managed-utrs/collection/:collection/utr/:utr",
            "description": "Removes a UTR from a specified collection.",
            "interactions": [
                {
                    "step": 1,
                    "type": "Database",
                    "service": null,
                    "method": null,
                    "path": null,
                    "database": "agent-assurance-mongo",
                    "operation": "Delete",
                    "description": "Delete the UTR property from the specified collection."
                }
            ]
        }
    ]
}